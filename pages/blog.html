<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Edge Blog - Read More</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />


    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Mint Media" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="../css/style.css" />
    <style>
        /* Optional: Add specific blog styles here if Tailwind alone isn't enough */
        .blog-content h2,
        .blog-content h3 {
            @apply text-2xl font-bold mt-8 mb-4 text-gray-800;
        }

        .blog-content p {
            @apply text-lg leading-relaxed mb-6 text-gray-700;
        }

        .blog-content ul,
        .blog-content ol {
            @apply list-inside list-disc mb-6 pl-5 text-gray-700;
        }

        .blog-content ol {
            @apply list-decimal;
        }

        .blog-content li {
            @apply mb-2;
        }

        .blog-header {
            @apply mb-12 text-center;
        }
    </style>
</head>

<body class="antialiased bg-gray-100 text-gray-900">

    <div id="common-header"></div>

    <main class="py-10 px-4 sm:px-6 lg:px-8">
        <div class="container mx-auto max-w-4xl bg-white rounded-xl shadow-lg p-8 md:p-12" id="blog-detail-wrapper">
            <div id="blog-detail">
                <p class="text-center text-gray-600">Loading blog post...</p>
            </div>
        </div>
    </main>

    <div id="common-footer"></div>

    <script>
        // Load common header
        fetch("/common/header.html")
            .then(res => res.text())
            .then(html => {
                document.getElementById("common-header").innerHTML = html;
            })
            .catch(error => console.error("Failed to load header:", error));

        fetch("/common/footer.html")
            .then((res) => res.text())
            .then((html) => {
                document.getElementById("common-footer").innerHTML = html;
            });
        document.addEventListener("DOMContentLoaded", function () {
            const params = new URLSearchParams(window.location.search);
            const blogId = params.get("id");
            const blogDetailContainer = document.getElementById("blog-detail");

            if (!blogId) {
                blogDetailContainer.innerHTML = '<p class="text-red-600 font-semibold text-center py-8">Error: Blog ID not provided.</p>';
                return;
            }

            fetch("/assets/data/blogs.json") // Ensure this path is correct relative to blog.html
                .then((response) => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then((blogs) => {
                    // Using loose equality (==) here because blogId from URLSearchParams is a string,
                    // and your JSON IDs might be numbers. Alternatively, ensure IDs in JSON are strings.
                    const blog = blogs.find((b) => b.id == blogId);

                    if (!blog) {
                        blogDetailContainer.innerHTML = '<p class="text-red-600 font-semibold text-center py-8">Blog not found. Please check the URL.</p>';
                        return;
                    }

                    const content = `
                        <div class="blog-header">
                            <img src="${blog.image}" alt="${blog.title}" class="blog-image w-full h-80 object-cover rounded-lg mb-8" />
                            <h1 class="blog-title text-3xl sm:text-4xl font-extrabold leading-tight mb-4 text-gray-900">${blog.title}</h1>
                            ${blog.subtitle ? `<p class="blog-subtitle text-xl sm:text-2xl text-blue-600 mb-4">${blog.subtitle}</p>` : ''}
                            <p class="blog-meta text-gray-500 text-sm">By <span class="font-semibold">${blog.author || 'MINT MEDIA Team'}</span> on <span class="font-semibold">${blog.date || 'Unknown Date'}</span></p>
                        </div>
                        <div class="blog-body blog-content prose max-w-none">
                            ${blog.content || '<p class="text-gray-600">No content available for this blog post.</p>'}
                        </div>
                    `;
                    blogDetailContainer.innerHTML = content;
                })
                .catch((error) => {
                    console.error("Error loading blog:", error);
                    blogDetailContainer.innerHTML = '<p class="text-red-600 font-semibold text-center py-8">An error occurred while loading the blog post. Please try again later.</p>';
                });
        });
    </script>
</body>

</html>